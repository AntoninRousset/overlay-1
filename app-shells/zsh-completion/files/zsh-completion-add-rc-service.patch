#compdef rc-service

local actions_args actions _services
_services() {
	local services
	services=($(rc-service -l))
	compadd "$@" ${(kv)=services}
}
_cmd() {
	local cmd
	cmd=(start stop restart)
	compadd "$@" ${(kv)=cmd}
}
actions=(
	- '(cmd)'
	"(--ifexists -i)"{--ifexists,-i}'[Run script only if it exist]:service:_services:command:_cmd'
	- '(only)'
	"(--exists -e)"{--exists,-e}'[Return zero if the given service exist]:service:_services'
	"(--list -l)"{--list,-l}'[List all available services]'
	"(--resolve -r)"{--resolve,-r}'[Return the full path of a service]:service:_services'
	#"(--asd -a)"{--asd,-a}'[Return the full path of a service]:service:_services'
)
_arguments $actions[@]
